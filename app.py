import streamlit as st
import random

# --- 1. ãƒšãƒ¼ã‚¸è¨­å®šï¼ˆã‚¹ãƒãƒ›æœ€é©åŒ–ã®è¦ï¼‰ ---
st.set_page_config(page_title="é›»å·¥äºŒç¨® åˆæ ¼ãƒŠãƒ“", page_icon="âš¡", layout="wide")

# --- 2. ã‚¹ãƒãƒ›ä½™ç™½è§£æ¶ˆ ï¼† æ­£è§£ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ç”¨CSS ---
st.markdown("""
    <style>
    /* ã‚¹ãƒãƒ›ã®å·¨å¤§ãªå·¦å³ä½™ç™½ã‚’å®Œå…¨ã«å‰Šã‚‹ */
    [data-testid="stAppViewMain"] .main .block-container {
        padding: 1rem 0.5rem !important;
        max-width: 100% !important;
        margin: 0 !important;
    }

    /* æ­£è§£æ™‚ã®ã‚­ãƒ©ã‚­ãƒ©ãƒ»ãµã‚ã£ã¨ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
    @keyframes shine-pop {
        0% { transform: scale(0.98); opacity: 0; box-shadow: 0 0 0px #4CAF50; }
        50% { transform: scale(1.02); opacity: 1; box-shadow: 0 0 20px #4CAF50; }
        100% { transform: scale(1); opacity: 1; box-shadow: 0 0 5px #4CAF50; }
    }
    .ã‚­ãƒ©ã‚­ãƒ©æ­£è§£ {
        animation: shine-pop 0.6s ease-out forwards;
        padding: 1.2rem;
        border-radius: 12px;
        background-color: #f0fff4;
        border: 3px solid #4CAF50;
        color: #1b5e20;
        font-weight: bold;
        text-align: center;
        margin-bottom: 1rem;
    }

    /* å…¨ä½“ã®èƒŒæ™¯è‰² */
    .stApp {
        background-color: #f8f9fa;
    }
/* å•é¡Œãƒœãƒƒã‚¯ã‚¹ */
        .question-container {
            background-color: #ffffff;
            padding: 1.2rem;
            border-radius: 15px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
            border-left: 5px solid #4CAF50;
            margin-bottom: 10px;
            width: 100%;
            box-sizing: border-box;
        }

        /* â˜…ã“ã“ã‚’è¿½åŠ ï¼å•é¡Œæ–‡ã®æ–‡å­—ã‚µã‚¤ã‚ºã‚’èª¿æ•´ï¼ˆé¸æŠè‚¢ã‚ˆã‚Šç´„2ptå¤§ããï¼‰ */
        .question-container h3 {
            font-size: 1.15rem !important; 
            margin: 0;
            line-height: 1.4;
        }
    /* è§£èª¬ãƒœãƒƒã‚¯ã‚¹ */
    .info-container {
        background-color: #e8f4ea;
        padding: 1.2rem;
        border-radius: 10px;
        border-left: 5px solid #2e7d32;
        margin-top: 15px;
        width: 100%;
        box-sizing: border-box;
    }
    /* ãƒœã‚¿ãƒ³ã‚’æ¨ªã„ã£ã±ã„ã«åºƒã’ã¦ä½™ç™½ã‚’åŸ‹ã‚ã‚‹ */
    .stButton > button {
        width: 100% !important;
    }
    </style>
    """, unsafe_allow_html=True)

# --- 2. ãƒ¢ãƒ¼ãƒ‰ç®¡ç†ã®åˆæœŸåŒ– ---
if "mode" not in st.session_state:
    st.session_state.mode = "top"

# --- 3. ç”»é¢åˆ†å² ---

if st.session_state.mode == "top":
    st.title("âš¡ ç¬¬äºŒç¨®é›»æ°—å·¥äº‹å£« åˆæ ¼ãƒŠãƒ“")

    col1, col2 = st.columns(2)
    with col1:
        if st.button("ğŸŸ¢ ã¾ãšã¯ã“ã“ã‹ã‚‰", use_container_width=True):
            data = [
                {
                    "q":"ä¸€èˆ¬ä½å®…ã®å±‹å†…é…ç·šã§ã€ŒVVFã‚±ãƒ¼ãƒ–ãƒ«ã€ã‚’ä½¿ç”¨ã™ã‚‹ç›®çš„ã¨ã—ã¦æœ€ã‚‚é©åˆ‡ãªã®ã¯ã©ã‚Œï¼Ÿ",
                    "choices": [ "ã‚¤: é«˜é›»åœ§ã‚’é•·è·é›¢é€é›»ã™ã‚‹ãŸã‚", "ãƒ­: å±‹å†…ã®å›ºå®šé…ç·šã«ä½¿ã†ãŸã‚", "ãƒ: åœ°ä¸­ã«ç›´æ¥åŸ‹è¨­ã™ã‚‹ãŸã‚", "ãƒ‹: é˜²çˆ†ã‚¨ãƒªã‚¢ã§ä½¿ç”¨ã™ã‚‹ãŸã‚" ],
                    "correct": "ãƒ­",
                    "info": "VVFã‚±ãƒ¼ãƒ–ãƒ«ã¯ä½å®…ãªã©ã®å±‹å†…ã®å›ºå®šé…ç·šã«ä½¿ã‚ã‚Œã‚‹ã‚±ãƒ¼ãƒ–ãƒ«ã ã­ï¼çµ¶ç¸ä½“ã¨è¢«è¦†ãŒä¸€ä½“åŒ–ã—ã¦ã„ã¦æ–½å·¥ã—ã‚„ã™ã„ã®ãŒç‰¹å¾´ã ã‚ˆã€‚"
                },
                { 
                    "q": "é›»ç·šã®å¤ªã•ã‚’è¡¨ã™å˜ä½ã¯ã©ã‚Œï¼Ÿ", 
                    "choices": [ "ã‚¤: mmÂ²", "ãƒ­: kg", "ãƒ: V", "ãƒ‹: A" ], 
                    "correct": "ã‚¤", 
                    "info": "é›»ç·šã®å¤ªã•ã¯mmÂ²ï¼ˆå¹³æ–¹ãƒŸãƒªãƒ¡ãƒ¼ãƒˆãƒ«ï¼‰ã§è¡¨ã™ã‚ˆã€‚å¤ªã•ãŒå¤§ãã„ã»ã©é›»æµã‚’å¤šãæµã›ã‚‹ã‚“ã ã€‚" 
                },
                { "q": "ä¸€èˆ¬çš„ãªä½å®…ç”¨ã‚³ãƒ³ã‚»ãƒ³ãƒˆå›è·¯ï¼ˆ20Aï¼‰ã®é›»ç·šå¤ªã•ã¨ã—ã¦æ­£ã—ã„ã®ã¯ã©ã‚Œï¼Ÿ", 
                    "choices": [ "ã‚¤: 1.6mm", "ãƒ­: 2.0mm", "ãƒ: 3.2mm", "ãƒ‹: 5.5mm" ], 
                    "correct": "ãƒ­", 
                    "info": "ä½å®…ã®20Aã‚³ãƒ³ã‚»ãƒ³ãƒˆå›è·¯ã¯2.0mmã®VVFã‚±ãƒ¼ãƒ–ãƒ«ã‚’ä½¿ã†ã®ãŒä¸€èˆ¬çš„ã ã‚ˆã€‚" 
                },
                { "q": "æ¼é›»é®æ–­å™¨ï¼ˆELBï¼‰ã®ä¸»ãªå½¹å‰²ã¯ã©ã‚Œï¼Ÿ", 
                    "choices": [ "ã‚¤: éé›»æµã‚’é˜²æ­¢ã™ã‚‹", "ãƒ­: é›·ã‚µãƒ¼ã‚¸ã‚’é˜²æ­¢ã™ã‚‹", "ãƒ: æ¼é›»ã‚’æ¤œå‡ºã—ã¦å›è·¯ã‚’é®æ–­ã™ã‚‹", "ãƒ‹: é›»åœ§ã‚’å®‰å®šã•ã›ã‚‹" ], 
                    "correct": "ãƒ", 
                    "info": "æ¼é›»é®æ–­å™¨ã¯æ¼é›»ã‚’æ¤œå‡ºã—ã¦å›è·¯ã‚’é®æ–­ã—ã€æ„Ÿé›»ã‚„ç«ç½ã‚’é˜²ããŸã‚ã®è£…ç½®ã ã‚ˆã€‚" 
                },
                { "q": "ä¸‰è·¯ã‚¹ã‚¤ãƒƒãƒã‚’ä½¿ã†ç›®çš„ã¨ã—ã¦æ­£ã—ã„ã®ã¯ã©ã‚Œï¼Ÿ", 
                    "choices": [ "ã‚¤: 2ã¤ã®å ´æ‰€ã‹ã‚‰1ã¤ã®ç…§æ˜ã‚’æ“ä½œã™ã‚‹ãŸã‚", "ãƒ­: 3ã¤ã®ç…§æ˜ã‚’åŒæ™‚ã«ç‚¹ç¯ã•ã›ã‚‹ãŸã‚", "ãƒ: 3ç›¸é›»æºã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹ãŸã‚", "ãƒ‹: éå¸¸ç”¨ç…§æ˜ã‚’åˆ¶å¾¡ã™ã‚‹ãŸã‚" ], 
                    "correct": "ã‚¤", 
                    "info": "ä¸‰è·¯ã‚¹ã‚¤ãƒƒãƒã¯éšæ®µã‚„å»Šä¸‹ãªã©ã€2ã‹æ‰€ã‹ã‚‰1ã¤ã®ç…§æ˜ã‚’æ“ä½œã—ãŸã„ã¨ãã«ä½¿ã†ã‚ˆã€‚" 
                },
                { "q": "ã“ã®å›³è¨˜å·ãŒç¤ºã™æ©Ÿå™¨ã¯ã©ã‚Œï¼Ÿ", 
                    "img": "images1.jpg", 
                    "choices": [ "ã‚¤: é…ç·šç”¨é®æ–­å™¨ï¼ˆãƒ–ãƒ¬ãƒ¼ã‚«ï¼‰", "ãƒ­: æ¼é›»é®æ–­å™¨", "ãƒ: å¤‰åœ§å™¨", "ãƒ‹: é›»åŠ›é‡è¨ˆ" ], 
                    "correct": "ã‚¤", 
                    "info": "ã“ã®å›³è¨˜å·ã¯é…ç·šç”¨é®æ–­å™¨ï¼ˆãƒ–ãƒ¬ãƒ¼ã‚«ï¼‰ã ã‚ˆã€‚éé›»æµã‚’é˜²ããŸã‚ã«ä½¿ã‚ã‚Œã‚‹ä¿è­·è£…ç½®ã ã­ã€‚" 
                },
                {
                    "q": "ä¸€èˆ¬å®¶åº­ã®å±‹å†…é…ç·šå›³ã«ãŠã„ã¦ã€ã€Œâ—ã€ã§è¡¨ã•ã‚Œã‚‹ã‚‚ã®ã¯æ¬¡ã®ã†ã¡ã©ã‚Œã‹ï¼Ÿ",
                    "choices": ["ã‚¤. å£ä»˜ã‚³ãƒ³ã‚»ãƒ³ãƒˆ", "ãƒ­. ã‚¿ãƒ³ãƒ–ãƒ©ã‚¹ã‚¤ãƒƒãƒï¼ˆç‚¹æ»…å™¨ï¼‰", "ãƒ. å¼•æ›ã‚·ãƒ¼ãƒªãƒ³ã‚°ï¼ˆç…§æ˜å™¨å…·ã®å–ä»˜éƒ¨ï¼‰", "ãƒ‹. ã‚¸ãƒ§ã‚¤ãƒ³ãƒˆãƒœãƒƒã‚¯ã‚¹"],
                    "correct": "ãƒ­. ã‚¿ãƒ³ãƒ–ãƒ©ã‚¹ã‚¤ãƒƒãƒï¼ˆç‚¹æ»…å™¨ï¼‰",
                    "info": "éƒ¨å±‹ã®é›»æ°—ã‚’ãƒ‘ãƒãƒƒã¨ã¤ã‘ãŸã‚Šæ¶ˆã—ãŸã‚Šã™ã‚‹ã‚¹ã‚¤ãƒƒãƒã®è¨˜å·ã¯ã€ã€Œâ—ã€ã§è¡¨ã•ã‚Œã‚‹ã‚ˆã€‚  \nã¡ãªã¿ã«ã€Œâ—‹ã€ã®ã‚ˆã†ã«ä¸­ãŒç™½ã„ä¸¸ã¯ã€æ¥ç¶šç‚¹ï¼ˆã‚¸ãƒ§ã‚¤ãƒ³ãƒˆãƒœãƒƒã‚¯ã‚¹ï¼‰ãªã©ã‚’æŒ‡ã™ã“ã¨ãŒå¤šã„ã®ã§ã€è‰²ã®å¡—ã‚‰ã‚Œæ–¹ã«æ³¨æ„ã—ã‚ˆã†ã€‚",
                },
        {
        "q": "ã‚³ãƒ³ã‚»ãƒ³ãƒˆã®åˆƒå—ã®å½¢ã§ã€æ¥åœ°æ¥µä»˜æ¥åœ°ç«¯å­ä»˜ã‚³ãƒ³ã‚»ãƒ³ãƒˆã®å›³è¨˜å·ï¼ˆETï¼‰ã«ã€ŒEã€ã‚’ä»˜ã‘åŠ ãˆãŸã€ŒEETã€ã¨è¡¨è¨˜ã•ã‚Œã‚‹ã‚‚ã®ã¯ã€æ¬¡ã®ã†ã¡ã©ã‚Œï¼Ÿ",
        "choices": [
            "ã‚¤. æ¥åœ°æ¥µã®ã¿ãŒä»˜ã„ã¦ã„ã‚‹ã‚³ãƒ³ã‚»ãƒ³ãƒˆ",
            "ãƒ­. æ¥åœ°æ¥µã¨æ¥åœ°ç«¯å­ã®ä¸¡æ–¹ãŒä»˜ã„ã¦ã„ã‚‹ã‚³ãƒ³ã‚»ãƒ³ãƒˆ",
            "ãƒ. æ¼é›»é®æ–­å™¨ãŒä»˜ã„ã¦ã„ã‚‹ã‚³ãƒ³ã‚»ãƒ³ãƒˆ",
            "ãƒ‹. æŠœã‘æ­¢ã‚å½¢ã®ã‚³ãƒ³ã‚»ãƒ³ãƒˆ"
        ],
        "correct": "ãƒ­",
        "info": "ã€ŒEã€ã¯æ¥åœ°æ¥µï¼ˆEarthï¼‰ã€ã€ŒTã€ã¯æ¥åœ°ç«¯å­ï¼ˆTerminalï¼‰ã®ã“ã¨ã ã‚ˆã€‚EETã¯ã€ã‚¢ãƒ¼ã‚¹ã®æ£’ã‚’å·®ã™ç©´ï¼ˆæ¥µï¼‰ã¨ã€ã‚¢ãƒ¼ã‚¹ç·šã‚’ã­ã˜æ­¢ã‚ã™ã‚‹å ´æ‰€ï¼ˆç«¯å­ï¼‰ã®ä¸¡æ–¹ãŒã‚ã‚‹ã‚¿ã‚¤ãƒ—ã®ã“ã¨ã ã­ï¼ã‚­ãƒƒãƒãƒ³ãªã©ã®æ°´å›ã‚Šã§ã‚ˆãè¦‹ã‹ã‘ã‚‹ã‚ˆã€‚"
    },
{
        "q": "ä¸€èˆ¬ç”¨é›»æ°—å·¥ä½œç‰©ã®æ¤œæŸ»ã«ãŠã„ã¦ã€å›è·¯ã®çµ¶ç¸æŠµæŠ—ã‚’æ¸¬å®šã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã™ã‚‹æ¸¬å®šå™¨ã¯ã©ã‚Œï¼Ÿ",
        "choices": [
            "ã‚¤. ã‚¯ãƒ©ãƒ³ãƒ—ãƒ¡ãƒ¼ã‚¿",
            "ãƒ­. å›è·¯è¨ˆï¼ˆãƒ†ã‚¹ã‚¿ï¼‰",
            "ãƒ. çµ¶ç¸æŠµæŠ—è¨ˆï¼ˆãƒ¡ã‚¬ãƒ¼ï¼‰",
            "ãƒ‹. æ¥åœ°æŠµæŠ—è¨ˆ"
        ],
        "correct": "ãƒ",
        "info": "é›»æ°—ãŒæ¼ã‚Œã¦ã„ãªã„ã‹ï¼ˆçµ¶ç¸ãŒä¿ãŸã‚Œã¦ã„ã‚‹ã‹ï¼‰ã‚’èª¿ã¹ã‚‹ã«ã¯ã€ã€Œçµ¶ç¸æŠµæŠ—è¨ˆã€ã‚’ä½¿ã†ã‚ˆã€‚ç¾å ´ã§ã¯ã€Œãƒ¡ã‚¬ãƒ¼ã€ã¨ã‚‚å‘¼ã°ã‚Œã‚‹å¿…é ˆã‚¢ã‚¤ãƒ†ãƒ ã ã­ï¼"
    },
    {
        "q": "ãƒ“ãƒ‹ãƒ«å¤–è£…ã‚±ãƒ¼ãƒ–ãƒ«ï¼ˆVVFï¼‰ã‚’ç›´æ¥å£é¢ã«å›ºå®šã—ã¦é…ç·šã™ã‚‹å ´åˆã€æ”¯æŒç‚¹é–“ã®è·é›¢ã¯æœ€å¤§ä½•mä»¥ä¸‹ã«ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ï¼Ÿ",
        "choices": [
            "ã‚¤. 1.0m",
            "ãƒ­. 1.5m",
            "ãƒ. 2.0m",
            "ãƒ‹. 3.0m"
        ],
        "correct": "ãƒ",
        "info": "VVFã‚±ãƒ¼ãƒ–ãƒ«ã®æ”¯æŒç‚¹é–“è·é›¢ã¯ã€Œ2mä»¥ä¸‹ã€ã¨æ±ºã¾ã£ã¦ã„ã‚‹ã‚ˆï¼  \nã¡ãªã¿ã«ç®¡ï¼ˆé‡‘å±ç®¡ãªã©ï¼‰ã‚’ä½¿ã†ã¨è·é›¢ãŒå¤‰ã‚ã‚‹ã‹ã‚‰æ³¨æ„ã ã‚ˆã€‚"
    },
     {
        "q": "ä¸‰ç›¸èª˜å°é›»å‹•æ©Ÿã®å›è»¢æ–¹å‘ã‚’é€†ã«ã™ã‚‹ãŸã‚ã®æ­£ã—ã„æ–¹æ³•ã¯ã©ã‚Œï¼Ÿ",
        "choices": [
            "ã‚¤. é›»æºã®3ç·šã®ã†ã¡ã€2ç·šã‚’å…¥ã‚Œæ›¿ãˆã‚‹",
            "ãƒ­. é›»æºã®3ç·šã™ã¹ã¦ã‚’å…¥ã‚Œæ›¿ãˆã‚‹",
            "ãƒ. é›»åœ§ã‚’2å€ã«ã™ã‚‹",
            "ãƒ‹. ã‚³ãƒ³ãƒ‡ãƒ³ã‚µã‚’ç›´åˆ—ã«ç¹‹ã"
        ],
        "correct": "ã‚¤",
        "info": "ä¸‰ç›¸äº¤æµã§å‹•ããƒ¢ãƒ¼ã‚¿ãƒ¼ï¼ˆèª˜å°é›»å‹•æ©Ÿï¼‰ã¯ã€3æœ¬ã‚ã‚‹ç·šã®ã†ã¡ã€Œã©ã‚Œã‹2æœ¬ã€ã‚’å…¥ã‚Œæ›¿ãˆã‚‹ã ã‘ã§ã€ç£ç•Œã®å›ã‚‹æ–¹å‘ãŒé€†ã«ãªã£ã¦å›è»¢ãŒåå¯¾ã«ãªã‚‹ã‚“ã ã€‚å…¨éƒ¨å…¥ã‚Œæ›¿ãˆã‚‹ã¨å…ƒã«æˆ»ã£ã¡ã‚ƒã†ã‹ã‚‰æ³¨æ„ã—ã¦ã­ï¼"
    } ,
        {
        "q": "ä¸€èˆ¬ç”¨é›»æ°—å·¥ä½œç‰©ã®é›»è·¯ã«ãŠã„ã¦ã€åœ°çµ¡ï¼ˆæ¼é›»ï¼‰ãŒç”Ÿã˜ãŸéš›ã«è‡ªå‹•çš„ã«é›»è·¯ã‚’é®æ–­ã™ã‚‹è£…ç½®ã¯ã©ã‚Œï¼Ÿ",
        "choices": [
            "ã‚¤. é…ç·šç”¨é®æ–­å™¨",
            "ãƒ­. æ¼é›»é®æ–­å™¨",
            "ãƒ. é›»ç£æ¥è§¦å™¨",
            "ãƒ‹. ãƒªãƒ¢ã‚³ãƒ³ãƒªãƒ¬ãƒ¼"
        ],
        "correct": "ãƒ­",
        "info": "æ¼é›»ã‚’æ¤œçŸ¥ã—ã¦ç«ç½ã‚„æ„Ÿé›»ã‚’é˜²ãã®ã¯ã€Œæ¼é›»é®æ–­å™¨ã€ã®å½¹å‰²ã ã‚ˆã€‚é…ç·šç”¨é®æ–­å™¨ï¼ˆãƒ–ãƒ¬ãƒ¼ã‚«ï¼‰ã¯ã€Œé›»æ°—ã®ä½¿ã„ã™ãï¼ˆéé›»æµï¼‰ã€ã‚’å®ˆã‚‹ã‚‚ã®ã ã‹ã‚‰ã€é•ã„ã‚’ã—ã£ã‹ã‚ŠæŠ¼ã•ãˆã¦ãŠã“ã†ã­ï¼"
    },
        {
        "q": "é›»æ°—å·¥äº‹å£«æ³•ã«ãŠã„ã¦ã€ç¬¬äºŒç¨®é›»æ°—å·¥äº‹å£«ãŒå¾“äº‹ã§ãã‚‹é›»æ°—å·¥äº‹ã®ç¯„å›²ã¨ã—ã¦æ­£ã—ã„ã‚‚ã®ã¯ã©ã‚Œï¼Ÿ",
        "choices": [
            "ã‚¤. 600Vä»¥ä¸‹ã§å—é›»ã™ã‚‹ä¸€èˆ¬ç”¨é›»æ°—å·¥ä½œç‰©",
            "ãƒ­. ã™ã¹ã¦ã®è‡ªå®¶ç”¨é›»æ°—å·¥ä½œç‰©",
            "ãƒ. æœ€å¤§é›»åŠ›500kWæœªæº€ã®è‡ªå®¶ç”¨é›»æ°—å·¥ä½œç‰©",
            "ãƒ‹. é‰„é“ã®ä¿¡å·å›è·¯å·¥äº‹ã®ã¿"
        ],
        "correct": "ã‚¤",
        "info": "ç¬¬äºŒç¨®é›»æ°—å·¥äº‹å£«ã¯ã€ä¸€èˆ¬å®¶åº­ã‚„å•†åº—ãªã©ã®ã€Œä¸€èˆ¬ç”¨é›»æ°—å·¥ä½œç‰©ã€ã®å·¥äº‹ãŒã§ãã‚‹ã‚ˆã€‚ãƒ“ãƒ«ãªã©ã®è‡ªå®¶ç”¨é›»æ°—å·¥ä½œç‰©ã¯ã€500kWæœªæº€ã§ã‚ã£ã¦ã‚‚ç¬¬ä¸€ç¨®ã‚„èªå®šãŒå¿…è¦ã«ãªã‚‹ã‹ã‚‰æ³¨æ„ã—ã¦ã­ã€‚"
    },
        {
        "q": "åšé‹¼é›»ç·šç®¡ï¼ˆã­ã˜ãªã—é›»ç·šç®¡ã‚’é™¤ãï¼‰ã®ç›¸äº’ã‚’æ¥ç¶šã™ã‚‹å ´åˆã«ä½¿ç”¨ã™ã‚‹ææ–™ã¯ã©ã‚Œï¼Ÿ",
        "choices": [
            "ã‚¤. ã‚«ãƒƒãƒ—ãƒªãƒ³ã‚°",
            "ãƒ­. ãƒ–ãƒƒã‚·ãƒ³ã‚°",
            "ãƒ. ãƒ­ãƒƒã‚¯ãƒŠãƒƒãƒˆ",
            "ãƒ‹. ã‚µãƒ‰ãƒ«"
        ],
        "correct": "ã‚¤",
        "info": "ç®¡ã¨ç®¡ã‚’ç¹‹ãã®ã¯ã€Œã‚«ãƒƒãƒ—ãƒªãƒ³ã‚°ã€ã ã‚ˆã€‚ãƒ–ãƒƒã‚·ãƒ³ã‚°ã¯ç®¡ã®ç«¯ã§é›»ç·šã‚’ä¿è­·ã™ã‚‹ã‚‚ã®ã€ãƒ­ãƒƒã‚¯ãƒŠãƒƒãƒˆã¯ç®¡ã‚’ãƒœãƒƒã‚¯ã‚¹ã«å›ºå®šã™ã‚‹ã‚‚ã®ã€ã‚µãƒ‰ãƒ«ã¯ç®¡ã‚’å£ã«å›ºå®šã™ã‚‹ã‚‚ã®ã ã‚ˆã€‚ç”¨é€”ã‚’ã‚»ãƒƒãƒˆã§è¦šãˆã‚ˆã†ï¼"
    },
        {
        "q": "å›è·¯è¨ˆï¼ˆãƒ†ã‚¹ã‚¿ï¼‰ã‚’ç”¨ã„ã¦æ¸¬å®šã§ãã‚‹é …ç›®ã¨ã—ã¦ã€èª¤ã£ã¦ã„ã‚‹ã‚‚ã®ã¯ã©ã‚Œï¼Ÿ",
        "choices": [
            "ã‚¤. ç›´æµé›»åœ§",
            "ãƒ­. äº¤æµé›»åœ§",
            "ãƒ. æŠµæŠ—",
            "ãƒ‹. çµ¶ç¸æŠµæŠ—"
        ],
        "correct": "ãƒ‹",
        "info": "ãƒ†ã‚¹ã‚¿ã¯é›»åœ§ã‚„æŠµæŠ—ã®ã€Œç›®å®‰ã€ã‚’æ¸¬ã‚‹ã®ã«ã¯ä¾¿åˆ©ã ã‘ã©ã€1MÎ©ã‚’è¶…ãˆã‚‹ã‚ˆã†ãªå¤§ããªã€Œçµ¶ç¸æŠµæŠ—ã€ã‚’æ¸¬ã‚‹ã«ã¯å°‚ç”¨ã®çµ¶ç¸æŠµæŠ—è¨ˆï¼ˆãƒ¡ã‚¬ãƒ¼ï¼‰ãŒå¿…è¦ãªã‚“ã ã€‚"
    },
        {
        "q": "å˜ç›¸3ç·šå¼100/200Vã®å±‹å†…é…ç·šã«ãŠã„ã¦ã€ä¸­æ€§ç·šã«æ¥ç¶šã—ã¦ã¯ã„ã‘ãªã„ã‚‚ã®ã¯ã©ã‚Œï¼Ÿ",
        "choices": [
            "ã‚¤. æ¥åœ°ç·š",
            "ãƒ­. éé›»æµé®æ–­å™¨ï¼ˆãƒ’ãƒ¥ãƒ¼ã‚ºï¼‰",
            "ãƒ. é€£çµç«¯å­",
            "ãƒ‹. ç™½è‰²ã®çµ¶ç¸é›»ç·š"
        ],
        "correct": "ãƒ­",
        "info": "ä¸­æ€§ç·šã«ãƒ’ãƒ¥ãƒ¼ã‚ºã‚’å…¥ã‚Œã¦ãã‚ŒãŒåˆ‡ã‚Œã‚‹ã¨ã€100Vã®æ©Ÿå™¨ã«200VãŒã‹ã‹ã£ã¦å£Šã‚Œã¡ã‚ƒã†ï¼ˆäº‹æ•…ã«ãªã‚‹ï¼‰å¯èƒ½æ€§ãŒã‚ã‚‹ã‚“ã ã€‚ã ã‹ã‚‰ä¸­æ€§ç·šã«ã¯éé›»æµé®æ–­å™¨ã‚’è¨­ç½®ã—ã¦ã¯ã„ã‘ãªã„æ±ºã¾ã‚Šã«ãªã£ã¦ã„ã‚‹ã‚ˆï¼"
    }               
            ]
            st.session_state.questions = data.copy()
            random.shuffle(st.session_state.questions)
            st.session_state.index, st.session_state.score, st.session_state.combo = 0, 0, 0
            st.session_state.answered = False
            st.session_state.mode = "quiz"
            st.rerun()

    with col2:
        if st.button("ğŸ”µ éå»å•ã«æŒ‘æˆ¦", use_container_width=True):
            data = [ 
                { "q": "å›³ã®ã‚ˆã†ãªå›è·¯ã§ã€ç«¯å­a-bé–“ã®åˆæˆæŠµæŠ—[Î©]ã¯ã€‚",
                    "img": "images2.jpg", 
                    "choices": ["ã‚¤. 1", "ãƒ­. 2", "ãƒ. 3", "ãƒ‹. 4"],
                    "correct": "ãƒ­",
                    "info": "å·¦å³ãŒå¯¾ç§°ã ã‹ã‚‰ä¸­å¤®ã®3Î©ã«ã¯é›»æµãŒæµã‚Œãšã€å›è·¯ã¯å·¦å³ã®æã ã‘ã§è€ƒãˆã‚‰ã‚Œã‚‹ã‚ˆã†ã«ç°¡ç•¥åŒ–ã§ãã‚‹ã‚ˆï¼ãã®çµæœã€å…¨ä½“ã®åˆæˆæŠµæŠ—ã¯2Î©ã«ãªã‚‹ã­ã€‚", 
                    "source": "å‡ºå…¸ï¼šä»¤å’Œ7å¹´åº¦ä¸‹æœŸ ç¬¬äºŒç¨®é›»æ°—å·¥äº‹å£«è©¦é¨“ï¼ˆå­¦ç§‘ï¼‰"
                },
                {
                    "q": "æŠµæŠ—ï¼²[Î©]ã«é›»åœ§ï¼¶[V]ã‚’åŠ ãˆã‚‹ã¨é›»æµï¼©[A]ãŒæµã‚Œã€ï¼°[W]ã®é›»åŠ›ãŒæ¶ˆè²»ã•ã‚Œã‚‹ã€‚æŠµæŠ—ï¼²ã‚’ç¤ºã™å¼ã¨ã—ã¦èª¤ã£ã¦ã„ã‚‹ã‚‚ã®ã¯",
                    "choices": ["ã‚¤. PI/V", "ãƒ­. P/IÂ²", "ãƒ. VÂ²/P", "ãƒ‹. V/I"],
                    "correct": "ã‚¤",
                    "info": "é›»åŠ›Pã¯ VÃ—I ã ã‹ã‚‰ã€æŠµæŠ—Rã¯ V/Iã€VÂ²/Pã€P/IÂ² ã®ã„ãšã‚Œã‹ã§è¡¨ã›ã‚‹ã‚ˆã€‚P/I ã¯é›»åœ§ã«ãªã‚‹ãŸã‚èª¤ã‚Šã ã­ã€‚",
                    "source": "å‡ºå…¸ï¼šä»¤å’Œ7å¹´åº¦ä¸‹æœŸ ç¬¬äºŒç¨®é›»æ°—å·¥äº‹å£«è©¦é¨“ï¼ˆå­¦ç§‘ï¼‰"
                },
                {
                    "q": "é›»ç†±å™¨ã«ã‚ˆã‚Š60kgã®æ°´ã®æ¸©åº¦ã‚’20Kä¸Šæ˜‡ã•ã›ã‚‹ã®ã«å¿…è¦ãªé›»åŠ›é‡[kWÂ·h]ã¯ã€‚ãŸã ã—ã€æ°´ã®æ¯”ç†±4.2kJ/(kgÂ·K)ã¨ã—ã€ç†±åŠ¹ç‡ã¯100%ã¨ã™ã‚‹ã€‚",
                    "choices": ["ã‚¤. 1.0", "ãƒ­. 1.2", "ãƒ. 1.4", "ãƒ‹. 1.6"],
                    "correct": "ãƒ",
                    "info": "æ°´ã‚’20 Kä¸Šæ˜‡ã•ã›ã‚‹ã®ã«å¿…è¦ãªç†±é‡ã¯60Ã—4.2Ã—20=5040kJã¨ãªã‚Šã€ã“ã‚Œã¯ 1.4kWï½¥h ã«ç›¸å½“ã™ã‚‹ã‚ˆã€‚ç†±åŠ¹ç‡100ï¼…ãªã®ã§ã€ã“ã®å€¤ãŒãã®ã¾ã¾å¿…è¦ãªé›»åŠ›é‡ã«ãªã‚‹ã‚“ã ã€‚",
                    "source": "å‡ºå…¸ï¼šä»¤å’Œ7å¹´åº¦ä¸‹æœŸ ç¬¬äºŒç¨®é›»æ°—å·¥äº‹å£«è©¦é¨“ï¼ˆå­¦ç§‘ï¼‰"
                },
                {
                    "q": "å›³ã®ã‚ˆã†ãªä¸‰ç›¸è² è·ã«ä¸‰ç›¸äº¤æµé›»åœ§ã‚’åŠ ãˆãŸã¨ãã€å„ç·šã«20Aã®é›»æµãŒæµã‚ŒãŸã€‚ç·šé–“é›»åœ§E[V]ã¯ã€‚",
                    "img": "images3.jpg", 
                    "choices": ["ã‚¤. 120", "ãƒ­. 173", "ãƒ. 208", "ãƒ‹. 240"],
                    "correct": "ãƒ",
                    "info": "ãƒ‡ãƒ«ã‚¿çµç·šã§ã¯ã€ç·šé–“é›»åœ§ã¨ç›¸é›»åœ§ãŒåŒã˜ã«ãªã‚‹ã‚ˆã€‚æŠµæŠ—1ã¤ã‚ãŸã‚Šã®ç›¸é›»åœ§ã¯ V=I*Rã ã‘ã©ã€ç›¸é›»æµã¯ç·šé›»æµã®1/âˆš3ã«ãªã‚‹ç‚¹ã«æ³¨æ„ã€‚",
                    "source": "å‡ºå…¸ï¼šä»¤å’Œ7å¹´åº¦ä¸‹æœŸ ç¬¬äºŒç¨®é›»æ°—å·¥äº‹å£«è©¦é¨“ï¼ˆå­¦ç§‘ï¼‰"
                },
                {
                    "q": "å›³ã®ä¸‰ç›¸3ç·šå¼å›è·¯ã§Ã—å°ã®ç®‡æ‰€ã§æ–­ç·šã—ãŸå ´åˆã€è² è·ã®å…¨æ¶ˆè²»é›»åŠ›[kW]ã¯ã€‚ãŸã ã—ã€è² è·ã®æŠµæŠ—ã¯30Î©ã¨ã—ã€é…ç·šã®æŠµæŠ—ã¯ç„¡è¦–ã—ã€é›»æºé›»åœ§ã¯ä¸€å®šã¨ã™ã‚‹ã€‚",
                    "img": "images4.jpg", 
                    "choices": ["ã‚¤. 0.7", "ãƒ­. 0.9", "ãƒ. 1.3", "ãƒ‹. 2.0"],
                    "correct": "ãƒ‹",
                    "info": "ãƒ‡ãƒ«ã‚¿çµç·šã§1æœ¬ã®ç·šãŒåˆ‡ã‚Œã‚‹ã¨ã€æ®‹ã£ãŸ2ã¤ã®æŠµæŠ—ã«ãã‚Œãã‚Œ200VãŒåŠ ã‚ã‚‹ã‚ˆã€‚1.33kW Ã— 2 = 2.0kW ã¨ãªã‚‹ã‚“ã ã€‚",
                    "source": "å‡ºå…¸ï¼šä»¤å’Œ7å¹´åº¦ä¸‹æœŸ ç¬¬äºŒç¨®é›»æ°—å·¥äº‹å£«è©¦é¨“ï¼ˆå­¦ç§‘ï¼‰"
                }
            ]
            st.session_state.questions = data.copy()
            random.shuffle(st.session_state.questions)
            st.session_state.index, st.session_state.score, st.session_state.combo = 0, 0, 0
            st.session_state.answered = False
            st.session_state.mode = "quiz"
            st.rerun()

elif st.session_state.mode == "quiz":
    if st.session_state.index >= len(st.session_state.questions):
        st.balloons()
        st.title("ğŸ‰ å…¨å•çµ‚äº†ï¼")
        st.metric("æœ€çµ‚ã‚¹ã‚³ã‚¢", f"{st.session_state.score} / {len(st.session_state.questions)}")
        if st.button("ã‚‚ã†ä¸€åº¦æŒ‘æˆ¦ã™ã‚‹", use_container_width=True):
            st.session_state.mode = "top"
            st.rerun()
        st.stop()

    current = st.session_state.questions[st.session_state.index]
    st.title("âš¡ å­¦ç§‘å¯¾ç­–")
    st.progress(st.session_state.index / len(st.session_state.questions))
    
    col_stat1, col_stat2 = st.columns(2)
    col_stat1.write(f"å•é¡Œ: {st.session_state.index + 1} / {len(st.session_state.questions)}")
    col_stat2.write(f"ğŸ”¥ ã‚³ãƒ³ãƒœ: {st.session_state.combo}")

    st.markdown(f'<div class="question-container"><h3>Q. {current["q"]}</h3></div>', unsafe_allow_html=True)
    if "source" in current: st.caption(current["source"])

    if "img" in current:
        try:
            st.image(current["img"], use_container_width=True)
        except:
            st.warning("ç”»åƒãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ")

 user_answer = st.radio(
    "", 
    q["options"], 
    key=q["question"], 
    label_visibility="collapsed"
)

    if not st.session_state.answered:
        if st.button("å›ç­”ã‚’ç¢ºå®šã™ã‚‹", type="primary", use_container_width=True):
            if selected:
                st.session_state.selected = selected
                st.session_state.answered = True
                st.rerun()
            else:
                st.warning("ã©ã‚Œã‹é¸ã‚“ã§ã­ï¼")
    else:
        is_correct = st.session_state.selected.startswith(current["correct"])
        if is_correct:
            # ã‚¹ãƒãƒ›ã§ã‚‚è¦‹ãˆã‚‹ã‚­ãƒ©ã‚­ãƒ©ãµã‚ã£ã¨æ¼”å‡º
            st.markdown('<div class="ã‚­ãƒ©ã‚­ãƒ©æ­£è§£">âœ¨ æ­£è§£ï¼ãŠã‚ã§ã¨ã†ï¼ âœ¨</div>', unsafe_allow_html=True)
            st.balloons()
            st.session_state.score += 1
            st.session_state.combo += 1
        else:
            st.error(f"æ®‹å¿µï¼ æ­£è§£ã¯ã€Œ{current['correct']}ã€ã§ã—ãŸã€‚")
            st.session_state.combo = 0

        st.markdown(f'<div class="info-container"><strong>ğŸ’¡ è§£èª¬:</strong><br>{current["info"]}</div>', unsafe_allow_html=True)

        if st.button("æ¬¡ã®å•é¡Œã¸ â”", use_container_width=True):
            st.session_state.index += 1
            st.session_state.answered = False
            st.rerun()

st.divider()
st.caption("keep it up! æ¯æ—¥ã‚³ãƒ„ã‚³ãƒ„ãŒåˆæ ¼ã¸ã®è¿‘é“ã§ã™")
